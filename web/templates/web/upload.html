{% extends 'web/main.html' %}

{% block page_content %}
    {% block scripts %}
        <script src="{{ STATIC_URL }}web/js/jquery.autosize.min.js"></script>
        <script src="{{ STATIC_URL }}web/js/markdown/lib/marked.js"></script>
        <script type="text/javascript">

            document.addEventListener("DOMContentLoaded", function (event) {

                markedData = marked($('textarea').val())
                $('#text-demo').html(markedData).height($('textarea').height())

                $('textarea').autosize();
                $('textarea').on('change input', function () {
                    markedData = marked($('textarea').val())
                    $('#text-demo').html(markedData).height($('textarea').height())
                });

            });
        </script>
    {% endblock %}
    <section id="document-upload">

        <div class="container">
            <h2>Upload your legal document</h2>
            <hr/>
            <div class="col-sm-12">

                <form action="/upload/" method="post" class="form-horizontal">
                    <div class="form-group">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-3 control-label">Document title</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="{{ form.title.auto_id }}" name="{{ form.title.name }}" value="{{ form.title.value|default:""|escape }}" placeholder="" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-6">
                            <textarea class="form-control"
                                      rows="30"
                                      id="{{ form.text.auto_id }}"
                                      name="{{ form.text.name }}"
                                    >{{ form.text.value|default:""|escape }}</textarea>
                        </div>
                        <div class="col-sm-6" id="text-demo"></div>
                    </div>
                    <input type="submit" class="btn btn-default" value="Upload document">
                    {% csrf_token %}
                </form>
            </div>

        </div>
    </section>
{% endblock %}
